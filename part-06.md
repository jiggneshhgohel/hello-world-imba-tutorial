In previous part we successfully integrated CSS into our application. Now let's work on managing that CSS dependency through Webpack because as of now we manage its inclusion in our `index.html` manually. Webpack makes this management possible through its Loaders concept.

Following are some easy to understand explanation of the Loaders I found at referenced places:

[Reference-1](https://medium.com/@paul.allies/webpack-managing-javascript-and-css-dependencies-3b4913f49c58).

> Loaders are tasks that are applied on a per file basis and run when webpack is building your bundle. A typical task would be preprocess a sass file into css and load the output into the head section of our html file.


[Reference-2](https://medium.com/a-beginners-guide-for-webpack-2/webpack-loaders-css-and-sass-2cc0079b5b3a)

> Webpack by itself only knows javascript, so when we want it to pack any other type of resources like .css or .scss or .ts, webpack needs help in order to compile and bundle those non-javascript types of resources.

> Loaders are the node-based utilities built for webpack to help webpack to compile and/or transform a given type of resource that can be bundled as a javascript module.

_Also we have already seen a Loader in action earlier, the Imba Loader, we configured in our `webpack.config.js`._


So getting back to our requirement we would utilize following loaders: [css-loader](https://www.npmjs.com/package/css-loader) and [style-loader](https://www.npmjs.com/package/style-loader). Again quoting the easy to follow explanation of both of them from **Reference-2** mentioned above:

> css-loader would help webpack to collect CSS from all the css files referenced in your application and put it into a string.

> style-loader would take the output string generated by the css-loader and put it inside the `<style>` tags in our `index.html` file.

So let's start by installing them

```
project_root$ npm install css-loader style-loader --save-dev
```

__*Note that we are using `--save-dev` option above because these dependencies are really development dependencies and should not be required to be installed on
if we deploy this application to a live server (aka production environment). Earlier also we installed various dependencies like `webpack`, `webpack-dev-server` which
when installed got added to `dependencies` section in our `package.json` and NOT in `devDependencies` section. That's because we just used the `--save` option, instead of
`--save-dev` option while installing them. From now onwards in any installation steps we will use use those installation options as applicable.*__

OK so getting back to our installation step, that should do following 2 things:

1. update package.json by updating `devDependencies` section under it by appending it `css-loader` and `style-loader` packages like following

```
  "css-loader": "^2.1.0",
  "style-loader": "^0.23.1",
```

_Note: The dependencies versions are the then versions when the dependencies were installed at on this tutorial author's local machine._

2. update `package-lock.json` w.r.t changes in `package.json`

Next we will update our `webpack.config.js` by adding configuration for these loaders. To do that open the file in a text-editor and add following to `module.rules` array
like we added for Imba loader:

```
{
    use:['style-loader','css-loader'],
    test:/\.css$/
}
```

That tells webpack that for any file which has filename matching with the regular expression specified in the `test` property, first use `css-loader` to compile those and then use `style-loader` on the output of `css-loader`. **Note, the order in which webpack applies loaders on the matching resources is from last to first.** This can be also seen
specified in the official [documentation](https://webpack.js.org/concepts/loaders/#configuration) as quoted below:

> Loaders are evaluated/executed from right to left

Now that for those loaders to bundle our CSS they will need to finds it in the dependency tree when it starts building the package starting from the entry file configured in `webpack.config.js`. To make it found we do two thing:

1. update `project_root/dist/index.html` by removing the following `<link>` tag we manually added in earlier steps.

```
<link rel="stylesheet" href="w3.css">
```

That is because now we need the inclusion of our CSS to be managed by webpack so we simply remove it and to make our configured loaders find the CSS we add it to our dependency tree by following the step 2 below

2. update our entry file i.e. `project_root/src/frontend/client.imba` by adding following `import` statement at the top to have it considered as a module dependency by webpack.

```
import '../css/w3.css'
```

_Note: `import` is supported by Imba. You can find examples at http://imba.io/guides/language/modules_


Now re-build the bundle using following command, in case you made the above change prior running `npm run start:dev`.


```
project_root$ npm run build
```

*If the webpack-dev-server was first started and then the changes were made that should have caused Webpack to automatically rebuild the bundle. To recollect refer the details above regarding watch and live-reloading explained in earlier part of the tutorial.*

Assuming webpack-dev-server is not running start it using command

```
project_root$ npm run start:dev
```

and then open a browser window at http://localhost:8080 and you should see the the styled content.

Now open the Browser's Developer Tools, for e.g. in Firefox `Inspector` tab check the DOM source you should find the source of our `w3.css` injected as a string into
`<style>` tag under `<head>` tag which confirms that the styling was injected by our configured css-loader and style-loader because how we initially referenced our
CSS using `<link>` tag, to make the styles available for use to our page, we removed it in step 1 earlier.

One last thing: Since we removed the `<link>` tag referencing our CSS there seems now no need to make webpack-dev-server serve content from `src/css` folder. Thus we should
update our `package.json` by removing `--content-base src/css` option from `"start:dev"` command. After doing that our `scripts` section should look like

```
  "scripts": {
    "build": "webpack",
    "start:dev": "webpack-dev-server --content-base dist"
  },
```

Now restart the server again and refresh the page at http://localhost:8080 and you should still see the the styled content.

Now save the changes made in codebase and commit the changes.
